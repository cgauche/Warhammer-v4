<script>
    var Menu = function (stepIndex, CharGen) {
        var oThat = {};
        oThat.stepName = "Création de personnage";
        oThat.desc = function () {
            return ''
        };
        oThat.title = function () {
            return 'Création de personnage'
        };
        oThat.initAction = function () {
        };

        oThat.cancelAction = function () {
            $('.cancel').html('Retour');
            $('.cancel').off('click').on('click', function () {
                $('.left_panel').addClass('overflow_panel');
                $('.left_panel').addClass('pretty_panel');
                CharGen.showMainMenu();
            });
        };
        oThat.createNewCharacter = function () {
            CharGen.stepIndex = 0;
            CharGen.saveName = "";
            CharGen.loadData();
            CharGen.initHelp();
            CharGen.character = createNewCharacter(CharGen);
        };
        oThat.show = function () {
            $('.left_panel').hide();
            $('.right_panel').hide();
            $('.all_panel').show();
            Helper.generateMenu(CharGen.stepList, CharGen.stepIndex, $('.all_panel'),
                function (i, el) {
                    $('.all_panel').hide();
                    $('.left_panel').show();
                    $('.right_panel').show();
                    CharGen.showPanel(i, el);
                },
                function (i, el) {
                    return el.type === 'creation' && i > CharGen.stepIndex && CharGen.stepIndex !== -1;
                },
                function (i, el) {
                    return !el.type || (
                        el.type === 'creation' && CharGen.stepIndex !== -1
                    ) || (
                        el.type === 'final' && CharGen.stepIndex === -1
                    );
                }
            );
        };
        return oThat;
    }
</script>